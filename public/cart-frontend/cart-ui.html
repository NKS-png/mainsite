<!-- Cart Icon Component -->
<div id="cart-icon" class="cart-icon">
    <span class="cart-count" id="cart-count">0</span>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="m1 1 4 4h15l-1 7H6"></path>
    </svg>
</div>

<!-- Mini Cart Dropdown -->
<div id="mini-cart" class="mini-cart hidden">
    <div class="mini-cart-header">
        <h3>Your Cart</h3>
        <button onclick="toggleMiniCart()">×</button>
    </div>
    <div id="mini-cart-items" class="mini-cart-items">
        <!-- Items will be populated by JavaScript -->
    </div>
    <div class="mini-cart-footer">
        <div class="cart-total">
            <span>Total: ₹<span id="cart-total">0</span></span>
        </div>
        <a href="/cart" class="view-cart-btn">View Cart</a>
        <button onclick="checkout()" class="checkout-btn">Checkout</button>
    </div>
</div>

<!-- Full Cart Page -->
<div class="cart-page">
    <h1>Shopping Cart</h1>

    <div id="cart-items" class="cart-items">
        <!-- Cart items will be populated here -->
    </div>

    <div class="cart-summary">
        <div class="coupon-section">
            <input type="text" id="coupon-code" placeholder="Enter coupon code">
            <button onclick="applyCoupon()">Apply Coupon</button>
        </div>

        <div class="cart-totals">
            <div class="total-row">
                <span>Subtotal:</span>
                <span>₹<span id="summary-subtotal">0</span></span>
            </div>
            <div class="total-row discount" id="discount-row" style="display: none;">
                <span>Discount:</span>
                <span>-₹<span id="summary-discount">0</span></span>
            </div>
            <div class="total-row total">
                <span>Total:</span>
                <span>₹<span id="summary-total">0</span></span>
            </div>
        </div>

        <button onclick="proceedToCheckout()" class="checkout-btn">Proceed to Checkout</button>
    </div>
</div>

<!-- Checkout Page -->
<div class="checkout-page">
    <h1>Checkout</h1>

    <div class="checkout-content">
        <div class="checkout-items">
            <h3>Order Summary</h3>
            <div id="checkout-items-list">
                <!-- Items will be populated -->
            </div>
        </div>

        <div class="checkout-form">
            <h3>Contact Information</h3>
            <form id="checkout-form">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="tel" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="name">Full Name:</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="notes">Special Instructions:</label>
                    <textarea id="notes"></textarea>
                </div>
            </form>
        </div>
    </div>

    <div class="checkout-actions">
        <button onclick="initiatePayment()" class="pay-btn" id="pay-btn">Pay Now</button>
    </div>
</div>

<!-- Special Request Form -->
<div class="special-request-modal" id="special-request-modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Custom Special Request</h3>
            <button onclick="closeSpecialRequestModal()">×</button>
        </div>
        <form id="special-request-form">
            <div class="form-group">
                <label for="request-title">Project Title:</label>
                <input type="text" id="request-title" required>
            </div>
            <div class="form-group">
                <label for="request-description">Detailed Description:</label>
                <textarea id="request-description" required></textarea>
            </div>
            <div class="form-group">
                <label for="request-budget">Budget (₹):</label>
                <input type="number" id="request-budget" min="1000" required>
            </div>
            <div class="form-group">
                <label>Reference Files:</label>
                <input type="file" id="reference-files" multiple accept="image/*,video/*,.pdf">
                <div id="file-preview"></div>
            </div>
            <button type="submit">Add to Cart</button>
        </form>
    </div>
</div>